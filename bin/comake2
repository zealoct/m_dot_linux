#!/usr/bin/env python

import sys
from sys import version_info
if(version_info[0] < 2 or version_info[1] < 5):
    print """You need at least python2.5 to run comake2
[Tip]PMO compiler cluster client packages python2.6/comake2/etc., see
http://wiki.babel.baidu.com/twiki/bin/view/Com/Pmo/Scm/UserManual"""
    sys.exit(1)

#coding:gbk
#Copyright (c) Baidu.com, Inc. All Rights Reserved 
#author:zhangyan04(@baidu.com)

import os
sys.path.append(os.path.dirname(os.path.realpath(__file__)) + "/libcomake2/")

from Driver import main

if __name__=="__main__":
    if('COMAKE2_PROFILE' in os.environ):
        import cProfile
        import pstats
        cProfile.run('main()','./comake2.profile.log')
        p=pstats.Stats('./comake2.profile.log')
        p.strip_dirs()
        p.sort_stats('time','calls')
        p.print_stats(30)
    else:
        main()

